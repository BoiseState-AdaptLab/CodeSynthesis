# CodeSynthesis
Authors: Tobi Popoola, Flo Ciaglia, Catherine Olschanowsky
## Overview
This is a research piece for generating inspector/executor code for sparse format
conversion. 

## Build Instructions
```shell script
git clone https://github.com/BoiseState-AdaptLab/CodeSynthesis
cd CodeSynthesis
mkdir build/
cd build/
cmake ../
make
```
## Running Synthesis

We currently have preloaded format descriptions for COO, CSR, DIA,ELL, MORTONCOO, COO3D, MCOO3D 
more formats will be added

```shell script
cd build
./bin/CodeSynthesis_Driver -src <formatname>,<dataName> -dest <formatName>,<dataName>\
[-fuse <statement-list-delimited-by-comma> -fuselevel <level>]
```

Driver generates synth.h and synth.c files which can be compiled / added to a pre-existing project.

### Examples

COO TO CSC + Fusion

```shell script
cd build
./bin/CodeSynthesis_Driver -src COO,ACOO -dest CSC,ACSC -fuse 2,3,4,6 -fuselevel 2
```

CSR TO DIA

```shell script
cd build
./bin/CodeSynthesis_Driver -src CSR,ACSR -dest DIA,ADIA
```

ELL To DIA

```shell script
cd build
./bin/CodeSynthesis_Driver -src ELL,AELL -dest DIA,ADIA
```

## Build Scripts
Some preset scripts have been generated by the synthesis algorithm, samples of these conversion 
scripts are available for inspection and check.

``` shell script
   make scripts
```

## Unit Tests
```shell script
cd build/
make test
```

